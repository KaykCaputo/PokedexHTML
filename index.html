<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokedex</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #d32f2f, #b71c1c);
      font-family: 'Press Start 2P', cursive;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .pokedex {
      background: #f5f5f5;
      border: 10px solid #333;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
      overflow: hidden;
      max-width: 1000px;
      width: 100%;
    }

    .screen {
      background: #2196f3;
      color: #fff;
      padding: 1rem;
      border-radius: 0;
      min-height: 320px;
      border: 6px solid #000;
      image-rendering: pixelated;
      box-shadow: inset -4px -4px 0 #1565c0, inset 4px 4px 0 #64b5f6;
      position: relative;
      overflow: hidden;
    }

    .name {
      font-size: 1rem;
      margin: 0;
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
    }

    .screen img {
      animation: jumping 650ms alternate infinite;
      max-width: 100%;
      height: 250px;
      object-fit: contain;
      margin-top: 2rem;
      filter: drop-shadow(2px 2px 0 #000)
              drop-shadow(-2px -2px 0 #000);
    }

    @keyframes jumping {
      0% { transform: translateY(20px); }
      100% { transform: translateY(0px); }
    }

    .stats {
      font-size: 0.8rem;
    }
    
    .stats li {
      background: transparent !important;
      color: #fff;
      font-weight: bold;
      border-color: rgba(255,255,255,0.4);
    }

    .btn-pokedex {
      background: #ff3d00;
      border: none;
      color: white;
      font-weight: bold;
      border-radius: 50px;
      padding: 0.6rem 1.2rem;
      transition: transform 0.2s;
      font-size: 0.8rem;
    }

    .btn-pokedex:hover {
      transform: scale(1.05);
      background: #dd2c00;
    }
    
    .form-control {
        font-family: 'Press Start 2P', cursive;
        font-size: 0.65rem;
    }

    .title-bar {
      background: #b71c1c;
      padding: 0.5rem;
      color: white;
      text-align: center;
      font-weight: bold;
      border-bottom: 4px solid #333;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="pokedex container-fluid">
    <div class="title-bar">ðŸ“Ÿ PokÃ©dex</div>
    <div class="row g-3 p-3">
      <div class="col-md-6">
        <div class="screen text-center d-flex flex-column justify-content-center">
          <h2 class="name">????</h2>
          <img src="" alt="PokÃ©mon" id="sprite">
        </div>
        <form class="row g-2 mt-3">
          <div class="col-12 col-sm-6">
            <input type="text" class="form-control" id="inputPokemon" placeholder="Ex: mewtwo">
          </div>
          <div class="col-12 col-sm-6 d-flex gap-2">
            <button type="submit" class="btn btn-pokedex w-100" onclick="fetchPokemon(inputPokemon.value.toLowerCase()); return false;">Buscar</button>
            <button type="submit" class="btn btn-pokedex w-100" onclick="fetchPokemon(Math.floor(Math.random()*1010)+1); return false;">ðŸŽ²</button>
          </div>
        </form>
      </div>
      <div class="col-md-6">
        <div class="screen">
          <h5 class="text-center">Stats</h5>
          <ul class="list-group stats">
            <li class="list-group-item d-flex justify-content-between">HP: <span id="hp">??</span></li>
            <li class="list-group-item d-flex justify-content-between">Attack: <span id="atk">??</span></li>
            <li class="list-group-item d-flex justify-content-between">Defense: <span id="def">??</span></li>
            <li class="list-group-item d-flex justify-content-between">Sp. Attack: <span id="spa">??</span></li>
            <li class="list-group-item d-flex justify-content-between">Sp. Defense: <span id="sde">??</span></li>
            <li class="list-group-item d-flex justify-content-between">Speed: <span id="spe">??</span></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    qS = (selector) => document.querySelector(selector);

    function setName({name}) {
      qS('.name').innerHTML = name ? name.toUpperCase() : '????';
    }

    function setSprite({sprites: {front_default: sprite}}) {
      qS('#sprite').src = sprite || '';
    }

    function setStats({stats}) {
        if (!stats) {
            const defaultValue = '??';
            qS('#hp').textContent = defaultValue;
            qS('#atk').textContent = defaultValue;
            qS('#def').textContent = defaultValue;
            qS('#spa').textContent = defaultValue;
            qS('#sde').textContent = defaultValue;
            qS('#spe').textContent = defaultValue;
            return;
        }
        const [hp, atk, def, spa, spd, spe] = stats;
        qS('#hp').textContent = hp.base_stat;
        qS('#atk').textContent = atk.base_stat;
        qS('#def').textContent = def.base_stat;
        qS('#spa').textContent = spa.base_stat;
        qS('#sde').textContent = spd.base_stat;
        qS('#spe').textContent = spe.base_stat;
    }


    function cleanPokemonData() {
      setPokemonData({sprites:{}, name:'', stats: null});
    }

    function setPokemonData(pokemonJson) {
      setName(pokemonJson);
      setSprite(pokemonJson);
      setStats(pokemonJson);
    }

    const fetchPokeApi = (url, fn) =>
      fetch(url)
        .then(resp => resp.json())
        .then(fn)
        .catch(err => { cleanPokemonData(); alert("PokÃ©mon nÃ£o encontrado!"); });

    const fetchPokemon = (name) =>
      fetchPokeApi(`https://pokeapi.co/api/v2/pokemon/${name}`, setPokemonData);

    window.addEventListener('load', () => fetchPokemon('pikachu'));
  </script>
</body>
</html>